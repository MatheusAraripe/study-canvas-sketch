!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){e.exports=function(t,e,n){if("number"!=typeof e||"number"!=typeof n)throw new TypeError('Must specify "to" and "from" arguments as numbers');if(e>n){var r=e;e=n,n=r}var i=n-e;if(0===i)return n;return t-i*Math.floor((t-e)/i)}},{}],2:[function(t,e,n){var r=t("defined"),i=t("./lib/wrap"),o=Number.EPSILON;function a(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}function s(t,e,n){return t*(1-n)+e*n}function u(t,e,n){return Math.abs(t-e)<o?0:(n-t)/(e-t)}function c(t,e){return e=r(e,0),"number"==typeof t&&isFinite(t)?t:e}function p(t){if("number"!=typeof t)throw new TypeError("Expected dims argument");return function(e,n){var i;n=r(n,0),null==e?i=n:"number"==typeof e&&isFinite(e)&&(i=e);var o,a=[];if(null==i)for(o=0;o<t;o++)a[o]=c(e[o],n);else for(o=0;o<t;o++)a[o]=i;return a}}function f(t,e,n,r){if(r=r||[],t.length!==e.length)throw new TypeError("min and max array are expected to have the same length");for(var i=0;i<t.length;i++)r[i]=s(t[i],e[i],n);return r}function l(t,e){if("number"!=typeof(t=r(t,0)))throw new TypeError("Expected n argument to be a number");for(var n=[],i=0;i<t;i++)n.push(e);return n}function h(t,e){return(t%e+e)%e}function d(t,e,n,r){return s(t,e,1-Math.exp(-n*r))}e.exports={mod:h,fract:function(t){return t-Math.floor(t)},sign:function(t){return t>0?1:t<0?-1:0},degToRad:function(t){return t*Math.PI/180},radToDeg:function(t){return 180*t/Math.PI},wrap:i,pingPong:function(t,e){return t=h(t,2*e),e-Math.abs(t-e)},linspace:function(t,e){if("number"!=typeof(t=r(t,0)))throw new TypeError("Expected n argument to be a number");"boolean"==typeof(e=e||{})&&(e={endpoint:!0});var n=r(e.offset,0);return e.endpoint?l(t).map(function(e,r){return t<=1?0:(r+n)/(t-1)}):l(t).map(function(e,r){return(r+n)/t})},lerp:s,lerpArray:f,inverseLerp:u,lerpFrames:function(t,e,n){e=a(e,0,1);var r=t.length-1,i=e*r,o=Math.floor(i),u=i-o,c=Math.min(o+1,r),p=t[o%t.length],l=t[c%t.length];if("number"==typeof p&&"number"==typeof l)return s(p,l,u);if(Array.isArray(p)&&Array.isArray(l))return f(p,l,u,n);throw new TypeError("Mismatch in value type of two array elements: "+o+" and "+c)},clamp:a,clamp01:function(t){return a(t,0,1)},smoothstep:function(t,e,n){var r=a(u(t,e,n),0,1);return r*r*(3-2*r)},damp:d,dampArray:function(t,e,n,r,i){i=i||[];for(var o=0;o<t.length;o++)i[o]=d(t[o],e[o],n,r);return i},mapRange:function(t,e,n,r,i,a){if(Math.abs(e-n)<o)return r;var s=(t-e)/(n-e)*(i-r)+r;return a&&(i<r?s<i?s=i:s>r&&(s=r):s>i?s=i:s<r&&(s=r)),s},expand2D:p(2),expand3D:p(3),expand4D:p(4)}},{"./lib/wrap":1,defined:5}],3:[function(t,e,n){var r=t("seed-random"),i=t("simplex-noise"),o=t("defined");e.exports=function t(e){e=o(e,null);var n,a,s,u=Math.random,c=null,p=!1;return f(e),{value:l,createRandom:function(e){return t(e)},setSeed:f,getSeed:function(){return n},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){var t=0;for(;0===t;)t=l();return t},permuteNoise:function(){s=h()},noise1D:function(t,e,n){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");return e=o(e,1),(n=o(n,1))*s.noise2D(t*e,0)},noise2D:function(t,e,n,r){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");return n=o(n,1),(r=o(r,1))*s.noise2D(t*n,e*n)},noise3D:function(t,e,n,r,i){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");return r=o(r,1),(i=o(i,1))*s.noise3D(t*r,e*r,n*r)},noise4D:function(t,e,n,r,i,a){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");if(!isFinite(r))throw new TypeError("w component for noise() must be finite");return i=o(i,1),(a=o(a,1))*s.noise4D(t*i,e*i,n*i,r*i)},sign:function(){return d()?1:-1},boolean:d,chance:function(t){if("number"!=typeof(t=o(t,.5)))throw new TypeError("expected n to be a number");return l()<t},range:m,rangeFloor:y,pick:function(t){return 0===t.length?void 0:t[y(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);var e,n,r=t.length,i=t.slice();for(;r;)e=Math.floor(l()*r--),n=i[r],i[r]=i[e],i[e]=n;return i},onCircle:g,insideCircle:function(t,e){t=o(t,1),g(1,e=e||[]);var n=t*Math.sqrt(l());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=o(t,1),e=e||[];var n=l()*Math.PI*2,r=2*l()-1,i=n,a=Math.acos(r);return e[0]=t*Math.sin(a)*Math.cos(i),e[1]=t*Math.sin(a)*Math.sin(i),e[2]=t*Math.cos(a),e},insideSphere:function(t,e){t=o(t,1),e=e||[];var n=l()*Math.PI*2,r=2*l()-1,i=l(),a=n,s=Math.acos(r),u=t*Math.cbrt(i);return e[0]=u*Math.sin(s)*Math.cos(a),e[1]=u*Math.sin(s)*Math.sin(a),e[2]=u*Math.cos(s),e},quaternion:function(t){t=t||[];var e=l(),n=l(),r=l(),i=Math.sqrt(1-e),o=Math.sqrt(e),a=2*Math.PI*n,s=2*Math.PI*r,u=Math.sin(a)*i,c=Math.cos(a)*i,p=Math.sin(s)*o,f=Math.cos(s)*o;return t[0]=u,t[1]=c,t[2]=p,t[3]=f,t},weighted:w,weightedSet:function(t){return 0===(t=t||[]).length?null:t[v(t)].value},weightedSetIndex:v,gaussian:function(t,e){if(t=o(t,0),e=o(e,1),p){p=!1;var n=c;return c=null,t+e*n}var r=0,i=0,a=0;do{a=(r=2*l()-1)*r+(i=2*l()-1)*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);return c=i*s,p=!0,t+e*(r*s)}};function f(t,e){"number"==typeof t||"string"==typeof t?a=r(n=t,e):(n=void 0,a=u),s=h(),c=null,p=!1}function l(){return a()}function h(){return new i(a)}function d(){return l()>.5}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return l()*(e-t)+t}function y(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(m(t,e))}function g(t,e){t=o(t,1),e=e||[];var n=2*l()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function v(t){return 0===(t=t||[]).length?-1:w(t.map(function(t){return t.weight}))}function w(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var r=l()*n;for(e=0;e<t.length;e++){if(r<t[e])return e;r-=t[e]}return 0}}()},{defined:5,"seed-random":6,"simplex-noise":7}],4:[function(t,e,n){(function(t){(function(){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.canvasSketch=r()}(this,function(){var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var i=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var o,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(s[c]=o[c]);if(e){a=e(o);for(var p=0;p<a.length;p++)r.call(o,a[p])&&(s[a[p]]=o[a[p]])}}return s},o="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s=o.performance&&o.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},u=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};var c=function(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)};function p(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function f(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function l(){return"undefined"!=typeof document}function h(t){return t&&"function"==typeof t.save&&"function"==typeof t.scale&&"function"==typeof t.restore}var d,m=a(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),y=a(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}),g=a(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(y(t))return!!y(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=m(t),p=m(o)}catch(t){return!1}if(c.length!=p.length)return!1;for(c.sort(),p.sort(),s=c.length-1;s>=0;s--)if(c[s]!=p[s])return!1;for(s=c.length-1;s>=0;s--)if(!n(t[u=c[s]],o[u],a))return!1;return typeof t==typeof o}(t,o,a))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}}),v=a(function(t,e){!function(){var e,n,r,i=(e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,function(t,a,s,u){if(1!==arguments.length||"string"!==(null===(c=t)?"null":void 0===c?"undefined":"object"!=typeof c?typeof c:Array.isArray(c)?"array":{}.toString.call(c).slice(8,-1).toLowerCase())||/\d/.test(t)||(a=t,t=void 0),(t=t||new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var c,p=(a=String(i.masks[a]||a||i.masks.default)).slice(0,4);"UTC:"!==p&&"GMT:"!==p||(a=a.slice(4),s=!0,"GMT:"===p&&(u=!0));var f=s?"getUTC":"get",l=t[f+"Date"](),h=t[f+"Day"](),d=t[f+"Month"](),m=t[f+"FullYear"](),y=t[f+"Hours"](),g=t[f+"Minutes"](),v=t[f+"Seconds"](),w=t[f+"Milliseconds"](),x=s?0:t.getTimezoneOffset(),b=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();return e.setHours(e.getHours()-r),1+Math.floor((e-n)/6048e5)}(t),M=function(t){var e=t.getDay();return 0===e&&(e=7),e}(t),_={d:l,dd:o(l),ddd:i.i18n.dayNames[h],dddd:i.i18n.dayNames[h+7],m:d+1,mm:o(d+1),mmm:i.i18n.monthNames[d],mmmm:i.i18n.monthNames[d+12],yy:String(m).slice(2),yyyy:m,h:y%12||12,hh:o(y%12||12),H:y,HH:o(y),M:g,MM:o(g),s:v,ss:o(v),l:o(w,3),L:o(Math.round(w/10)),t:y<12?i.i18n.timeNames[0]:i.i18n.timeNames[1],tt:y<12?i.i18n.timeNames[2]:i.i18n.timeNames[3],T:y<12?i.i18n.timeNames[4]:i.i18n.timeNames[5],TT:y<12?i.i18n.timeNames[6]:i.i18n.timeNames[7],Z:u?"GMT":s?"UTC":(String(t).match(n)||[""]).pop().replace(r,""),o:(x>0?"-":"+")+o(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10],W:b,N:M};return a.replace(e,function(t){return t in _?_[t]:t.slice(1,t.length-1)})});function o(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}i.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},i.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=i}()}),w="",x=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(d!==t||void 0===d)d=t,w="";else if(w.length>=n)return w.substr(0,n);for(;n>w.length&&e>1;)1&e&&(w+=t),e>>=1,t+=t;return w=(w+=t).substr(0,n)};var b,M=function(){},_={extension:"",prefix:"",suffix:""},T=["image/png","image/jpeg","image/webp"];function E(t,e){return void 0===e&&(e={}),new Promise(function(n,r){e=i({},_,e);var o=A(Object.assign({},e,{extension:"",frame:void 0})),a=t?"streamStart":"streamEnd",s=p();return s&&s.output&&"function"==typeof s[a]?s[a](i({},e,{filename:o})).then(function(t){return n(t)}):n({filename:o,client:!1})})}function k(t,e){return void 0===e&&(e={}),function(t){return new Promise(function(e){var n=t.indexOf(",");if(-1!==n){for(var r=t.slice(n+1),i=window.atob(r),o=t.slice(0,n),a=/data:([^;]+)/.exec(o),s=(a?a[1]:"")||void 0,u=new ArrayBuffer(i.length),c=new Uint8Array(u),p=0;p<i.length;p++)c[p]=i.charCodeAt(p);e(new window.Blob([u],{type:s}))}else e(new window.Blob)})}(t).then(function(t){return F(t,e)})}function F(t,e){return void 0===e&&(e={}),new Promise(function(n){var r=(e=i({},_,e)).filename,o=p();if(o&&"function"==typeof o.saveBlob&&o.output)return o.saveBlob(t,i({},e,{filename:r})).then(function(t){return n(t)});b||((b=document.createElement("a")).style.visibility="hidden",b.target="_blank"),b.download=r,b.href=window.URL.createObjectURL(t),document.body.appendChild(b),b.onclick=function(){b.onclick=M,setTimeout(function(){window.URL.revokeObjectURL(t),b.parentElement&&b.parentElement.removeChild(b),b.removeAttribute("href"),n({filename:r,client:!1})})},b.click()})}function A(t){if(void 0===t&&(t={}),"function"==typeof(t=i({},t)).file)return t.file(t);if(t.file)return t.file;var e,n,r,o,a=null,s="";("string"==typeof t.extension&&(s=t.extension),"number"==typeof t.frame)&&(e="number"==typeof t.totalFrames?t.totalFrames:Math.max(1e4,t.frame),n=String(t.frame),r=String(e).length,o="0",n=n.toString(),a=void 0===r?n:(o=0===o?"0":o?o.toString():" ",x(o,r-n.length)+n));var u=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";return null!=a?[u,a].filter(Boolean).join("-")+s:[t.prefix,t.name||t.timeStamp,u,t.hash,t.suffix].filter(Boolean).join("-")+s}var C={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},P=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],S=function(t){Object.keys(t).forEach(function(t){t in C?console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+C[t]+'"?'):P.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')})};var R=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t},{}),j=["mm","cm","m","pc","pt","in","ft","px"],D={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const O={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var N=function(t,e,n,r){if("number"!=typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var i=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}((r=r||{}).pixelsPerInch,96),o=r.precision,a=!1!==r.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===j.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+j.join(", "));if(-1===j.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+j.join(", "));if(e===n)return t;var s=1,u=1,c=!1;"px"===e&&(u=1/i,e="in"),"px"===n&&(c=!0,s=i,n="in");var p=D[e],f=D[n],l=t*p.factor*u;p.system!==f.system&&(l*=O[p.system].ratio);var h=l/f.factor*s;return c&&a?h=Math.round(h):"number"==typeof o&&isFinite(o)&&(h=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(h,o)),h};function I(t,e,n,r){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===r&&(r=72),N(t,e,n,{pixelsPerInch:r,precision:4,roundPixel:!0})}function L(t,e){var n,r,i,o,a,s,u=l(),c=e.dimensions,p=function(t){return!(!t.dimensions||"string"!=typeof t.dimensions&&!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),h=t.exporting,d=!!p&&!1!==e.scaleToFit,m=!(!h&&p)||e.scaleToView;u||(d=m=!1);var y,g,v=e.units,w="number"==typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,x=f(e.bleed,0),b=u?window.devicePixelRatio:1,M=m?b:1;"number"==typeof e.pixelRatio&&isFinite(e.pixelRatio)?g=f(e.exportPixelRatio,y=e.pixelRatio):p?(y=M,g=f(e.exportPixelRatio,1)):g=f(e.exportPixelRatio,y=b),"number"==typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(y=Math.min(e.maxPixelRatio,y)),h&&(y=g);var _,T,E=function(t,e){if(!l())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var r=n.getBoundingClientRect();return[r.width,r.height]}(0,e),k=E[0],F=E[1];if(p){var A=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"==typeof t){var r=t.toLowerCase();if(!(r in R))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var i=R[r];return i.dimensions.map(function(t){return I(t,i.units,e,n)})}return t}(c,v,w),C=Math.max(A[0],A[1]),P=Math.min(A[0],A[1]);if(e.orientation){var S="landscape"===e.orientation;n=S?C:P,r=S?P:C}else n=A[0],r=A[1];_=n,T=r,n+=2*x,r+=2*x}else _=n=k,T=r=F;var j=n,D=r;if(p&&v&&(j=I(n,v,"px",w),D=I(r,v,"px",w)),i=Math.round(j),o=Math.round(D),d&&!h&&p){var O=n/r,N=k/F,L=f(e.scaleToFitPadding,40),H=Math.round(k-2*L),z=Math.round(F-2*L);(i>H||o>z)&&(N>O?(o=z,i=Math.round(o*O)):(i=H,o=Math.round(i/O)))}return{bleed:x,pixelRatio:y,width:n,height:r,dimensions:[n,r],units:v||"px",scaleX:(a=m?Math.round(y*i):Math.round(y*j))/n,scaleY:(s=m?Math.round(y*o):Math.round(y*D))/r,pixelsPerInch:w,viewportWidth:m?Math.round(i):Math.round(j),viewportHeight:m?Math.round(o):Math.round(D),canvasWidth:a,canvasHeight:s,trimWidth:_,trimHeight:T,styleWidth:i,styleHeight:o}}N.units=j;var H=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(n.width=e.width);"number"==typeof e.height&&(n.height=e.height);var r,i=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var a=0;a<o.length;a++)if(r=n.getContext(o[a],i))return r}catch(t){r=null}return r||null};function z(t){var e,n;void 0===t&&(t={});var r=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"==typeof e){var o=t.canvas;o||(o=function(){if(!l())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),r=!0);var a=e||"2d";if("function"!=typeof o.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=H(a,i({},t.attributes,{canvas:o}))))throw new Error("Failed at canvas.getContext('"+a+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:r}}var B=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=p();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},q={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};q.sketch.get=function(){return this._sketch},q.settings.get=function(){return this._settings},q.props.get=function(){return this._props},B.prototype._computePlayhead=function(t,e){return"number"==typeof e&&isFinite(e)?t/e:0},B.prototype._computeFrame=function(t,e,n,r){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(r*e)},B.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},B.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},B.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},B.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!=typeof window&&"function"==typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},B.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(l()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=s(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},B.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},B.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},B.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},B.prototype.record=function(){var t=this;if(!this.props.recording)if(l()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var r,i=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then(function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(i,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"==typeof this.sketch.beginRecord&&this._wrapContextScale(function(e){return t.sketch.beginRecord(e)}),(r=e,void 0===r&&(r={}),E(!0,r)).catch(function(t){console.error(t)}).then(function(e){t._raf=window.requestAnimationFrame(i)})}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},B.prototype._signalBegin=function(){var t=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(e){return t.sketch.begin(e)})},B.prototype._signalEnd=function(){var t=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(e){return t.sketch.end(e)})},B.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),E(!1,t)).catch(function(t){console.error(t)}).then(function(){n&&e.sketch&&"function"==typeof e.sketch.endRecord&&e._wrapContextScale(function(t){return e.sketch.endRecord(t)})})},B.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||v(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},B.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),r=p(),o=Promise.resolve();if(r&&t.commit&&"function"==typeof r.commit){var a=i({},n),s=r.commit(a);o=u(s)?s:Promise.resolve(s)}return o.then(function(t){return e._doExportFrame(i({},n,{hash:t||""}))}).then(function(t){return 1===t.length?t[0]:t})},B.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render();return void 0===n&&(n=[this.props.canvas]),n=(n=[].concat(n).filter(Boolean)).map(function(e){var n,r="object"==typeof e&&e&&("data"in e||"dataURL"in e),o=r?e.data:e,a=r?i({},e,{data:o}):{data:o};if(c(n=o)&&/canvas/i.test(n.nodeName)&&"function"==typeof n.getContext){var s=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!T.includes(n))throw new Error("Invalid canvas encoding "+n);var r=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return r&&(r=("."+r).toLowerCase()),{extension:r,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(o,{encoding:a.encoding||t.encoding,encodingQuality:f(a.encodingQuality,t.encodingQuality,.95)});return Object.assign(a,{dataURL:s.dataURL,extension:s.extension,type:s.type})}return a}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map(function(e,n,r){var o=i({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:r.length}),a=!1!==t.save&&e.save;for(var s in o.save=!1!==a,o.filename=A(o),delete o.encoding,delete o.encodingQuality,o)void 0===o[s]&&delete o[s];var u=Promise.resolve({});if(o.save){var c=o.data;if(o.dataURL)u=k(o.dataURL,o);else u=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return F(new window.Blob(n,{type:e.type||""}),e)}(c,o)}return u.then(function(t){return Object.assign({},o,t)})})).then(function(n){var r=n.filter(function(t){return t.save});if(r.length>0){var i,o=r.find(function(t){return t.outputName}),a=r.some(function(t){return t.client}),s=r.some(function(t){return t.stream});i=r.length>1?r.length:o?o.outputName+"/"+r[0].filename:""+r[0].filename;var u="";if(t.sequence)u=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")";else r.length>1&&(u=" files");console.log("%c["+(a?"canvas-sketch-cli":"canvas-sketch")+"]%c "+(s?"Streaming into":"Exported")+" %c"+i+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof e.sketch.postExport&&e.sketch.postExport(),n})},B.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},B.prototype._preRender=function(){var t=this.props;h(t.context)&&!t.p5?(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY)):t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio)},B.prototype._postRender=function(){var t=this.props;h(t.context)&&!t.p5&&t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},B.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},B.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},B.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"==typeof this.sketch?t=this.sketch(e):"function"==typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},B.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach(function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")});var r=this._settings.canvas,i=this._settings.context;for(var o in t){var a=t[o];void 0!==a&&(e._settings[o]=a)}var s=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete s.frame:"frame"in t&&delete s.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete s.totalFrames:"totalFrames"in t&&delete s.duration,"data"in t&&(this._props.data=t.data);var u=this.getTimeProps(s);if(Object.assign(this._props,u),r!==this._settings.canvas||i!==this._settings.context){var c=z(this._settings),p=c.context;this.props.canvas=c.canvas,this.props.context=p,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!=typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),S(this._settings),this.resize(),this.render(),this.props},B.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,r=L(n,e);Object.assign(this._props,r);var i=this.props,o=i.pixelRatio,a=i.canvasWidth,s=i.canvasHeight,u=i.styleWidth,c=i.styleHeight,p=this.props.canvas;p&&!1!==e.resizeCanvas&&(n.p5?p.width===a&&p.height===s||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(a/o,s/o,!1),this._isP5Resizing=!1):(p.width!==a&&(p.width=a),p.height!==s&&(p.height=s)),l()&&!1!==e.styleCanvas&&(p.style.width=u+"px",p.style.height=c+"px"));var f=this._getSizeProps(),h=!g(t,f);return h&&this._sizeChanged(),h},B.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},B.prototype.animate=function(){if(this.props.playing)if(l()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=s(),e=1e3/this.props.fps,n=t-this._lastTime,r=this.props.duration,i="number"==typeof r&&isFinite(r),o=!0,a=this.settings.playbackRate;"fixed"===a?n=e:"throttle"===a?n>e?this._lastTime=t-=n%e:o=!1:this._lastTime=t;var u=n/1e3,c=this.props.time+u*this.props.timeScale;c<0&&i&&(c=r+c);var p=!1,f=!1;if(i&&c>=r&&(!1!==this.settings.loop?(o=!0,c%=r,f=!0):(o=!1,c=r,p=!0),this._signalEnd()),o){this.props.deltaTime=u,this.props.time=c,this.props.playhead=this._computePlayhead(c,r);var h=this.props.frame;this.props.frame=this._computeCurrentFrame(),f&&this._signalBegin(),h!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}p&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},B.prototype.dispatch=function(t){if("function"!=typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},B.prototype.mount=function(){this._appendCanvasIfNeeded()},B.prototype.unmount=function(){l()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},B.prototype._appendCanvasIfNeeded=function(){l()&&(!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas))},B.prototype._setupGLKey=function(){var t;this.props.context&&((t=this.props.context)&&"function"==typeof t.clear&&"function"==typeof t.clearColor&&"function"==typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},B.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,r=f(t.timeScale,1),i=f(t.fps,24),o="number"==typeof e&&isFinite(e),a="number"==typeof n&&isFinite(n),s=o?Math.floor(i*e):void 0,u=a?n/i:void 0;if(o&&a&&s!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===t.dimensions&&void 0!==t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=f(n,s,Infinity),e=f(e,u,Infinity);var c=t.time,p=t.frame,l="number"==typeof c&&isFinite(c),h="number"==typeof p&&isFinite(p),d=0,m=0,y=0;if(l&&h)throw new Error("You should specify either start frame or time, but not both.");return l?(y=this._computePlayhead(d=c,e),m=this._computeFrame(y,d,n,i)):h&&(y=this._computePlayhead(d=(m=p)/i,e)),{playhead:y,time:d,frame:m,duration:e,totalFrames:n,fps:i,timeScale:r}},B.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),S(this._settings);var n=z(this._settings),r=n.context,i=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:i,context:r,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},B.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then(function(){return n.run(),n})},B.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(e){return t.sketch.unload(e)}),this._sketch=null)},B.prototype.destroy=function(){this.unload(),this.unmount()},B.prototype.load=function(t,e){var n=this;if("function"!=typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==e&&this.update(e),this._preRender();var r=Promise.resolve();if(this.settings.p5){if(!l())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");r=new Promise(function(t){var e,r=n.settings.p5;r.p5&&(e=r.preload,r=r.p5);var i=function(r){e&&(r.preload=function(){return e(r)}),r.setup=function(){var e=n.props,i="webgl"===n.settings.context,o=i?r.WEBGL:r.P2D;r.noLoop(),r.pixelDensity(e.pixelRatio),r.createCanvas(e.viewportWidth,e.viewportHeight,o),i&&n.settings.attributes&&r.setAttributes(n.settings.attributes),n.update({p5:r,canvas:r.canvas,context:r._renderer.drawingContext}),t()}};if("function"==typeof r)new r(i);else{if("function"!=typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");i(window)}})}return r.then(function(){var e=t(n.props);return u(e)||(e=Promise.resolve(e)),e}).then(function(t){return t||(t={}),n._sketch=t,l()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n}).catch(function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t})},Object.defineProperties(B.prototype,q);var U="hot-id-cache",W=[];function G(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!=typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');e=Object.assign({},e,{canvas:!1,context:"string"==typeof e.context&&e.context})}var n,r,i=(n=p())&&n.hot;i&&(r=f(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var o=i&&"string"==typeof r;o&&W.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),o=!1);var a=Promise.resolve();if(o){W.push(r);var s=function(t){var e=p();if(e)return e[U]=e[U]||{},e[U][t]}(r);if(s){var u=function(){var t,n=(t=s.manager,e.animate?{time:t.props.time}:void 0);return s.manager.destroy(),n};a=s.load.then(u).catch(u)}}return a.then(function(n){var i,a=new B;return t?(e=Object.assign({},e,n),a.setup(e),a.mount(),i=a.loadAndRun(t)):i=Promise.resolve(a),o&&function(t,e){var n=p();n&&(n[U]=n[U]||{},n[U][t]=e)}(r,{load:i,manager:a}),i})}return G.canvasSketch=G,G.PaperSizes=R,G})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){"use strict";e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],6:[function(t,e,n){(function(t){(function(){"use strict";var n=256,r=[],i=void 0===t?window:t,o=Math.pow(n,6),a=Math.pow(2,52),s=2*a,u=255,c=Math.random;function p(t){var e,r=t.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(r||(t=[r++]);o<n;)s[o]=o++;for(o=0;o<n;o++)s[o]=s[a=u&a+t[o%r]+(e=s[o])],s[a]=e;(i.g=function(t){for(var e,r=0,o=i.i,a=i.j,s=i.S;t--;)e=s[o=u&o+1],r=r*n+s[u&(s[o]=s[a=u&a+e])+(s[a]=e)];return i.i=o,i.j=a,r})(n)}function f(t,e){var n,r=[],i=(typeof t)[0];if(e&&"o"==i)for(n in t)try{r.push(f(t[n],e-1))}catch(t){}return r.length?r:"s"==i?t:t+"\0"}function l(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return h(e)}function h(t){return String.fromCharCode.apply(0,t)}e.exports=function(t,u){if(u&&!0===u.global)return u.global=!1,Math.random=e.exports(t,u),u.global=!0,Math.random;var c=[],d=(l(f(u&&u.entropy||!1?[t,h(r)]:0 in arguments?t:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(n)),h(t)}catch(t){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,h(r)]}}(),3),c),new p(c));return l(h(d.S),r),function(){for(var t=d.g(6),e=o,r=0;t<a;)t=(t+r)*n,e*=n,r=d.g(1);for(;t>=s;)t/=2,e/=2,r>>>=1;return(t+r)/e}},e.exports.resetGlobal=function(){Math.random=c},l(Math.random(),r)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){!function(){"use strict";var t=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,i=1/3,o=1/6,a=(Math.sqrt(5)-1)/4,s=(5-Math.sqrt(5))/20;function u(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,i=(o=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var n=.02519603282416938*(o+=t.charCodeAt(e));n-=o=n>>>0,o=(n*=o)>>>0,o+=4294967296*(n-=o)}return 2.3283064365386963e-10*(o>>>0)});var o;t=i(" "),e=i(" "),n=i(" ");for(var a=0;a<arguments.length;a++)(t-=i(arguments[a]))<0&&(t+=1),(e-=i(arguments[a]))<0&&(e+=1),(n-=i(arguments[a]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}(t):Math.random,this.p=c(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function c(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}u.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,n){var i,o,a=this.permMod12,s=this.perm,u=this.grad3,c=0,p=0,f=0,l=(e+n)*t,h=Math.floor(e+l),d=Math.floor(n+l),m=(h+d)*r,y=e-(h-m),g=n-(d-m);y>g?(i=1,o=0):(i=0,o=1);var v=y-i+r,w=g-o+r,x=y-1+2*r,b=g-1+2*r,M=255&h,_=255&d,T=.5-y*y-g*g;if(T>=0){var E=3*a[M+s[_]];c=(T*=T)*T*(u[E]*y+u[E+1]*g)}var k=.5-v*v-w*w;if(k>=0){var F=3*a[M+i+s[_+o]];p=(k*=k)*k*(u[F]*v+u[F+1]*w)}var A=.5-x*x-b*b;if(A>=0){var C=3*a[M+1+s[_+1]];f=(A*=A)*A*(u[C]*x+u[C+1]*b)}return 70*(c+p+f)},noise3D:function(t,e,n){var r,a,s,u,c,p,f,l,h,d,m=this.permMod12,y=this.perm,g=this.grad3,v=(t+e+n)*i,w=Math.floor(t+v),x=Math.floor(e+v),b=Math.floor(n+v),M=(w+x+b)*o,_=t-(w-M),T=e-(x-M),E=n-(b-M);_>=T?T>=E?(c=1,p=0,f=0,l=1,h=1,d=0):_>=E?(c=1,p=0,f=0,l=1,h=0,d=1):(c=0,p=0,f=1,l=1,h=0,d=1):T<E?(c=0,p=0,f=1,l=0,h=1,d=1):_<E?(c=0,p=1,f=0,l=0,h=1,d=1):(c=0,p=1,f=0,l=1,h=1,d=0);var k=_-c+o,F=T-p+o,A=E-f+o,C=_-l+2*o,P=T-h+2*o,S=E-d+2*o,R=_-1+.5,j=T-1+.5,D=E-1+.5,O=255&w,N=255&x,I=255&b,L=.6-_*_-T*T-E*E;if(L<0)r=0;else{var H=3*m[O+y[N+y[I]]];r=(L*=L)*L*(g[H]*_+g[H+1]*T+g[H+2]*E)}var z=.6-k*k-F*F-A*A;if(z<0)a=0;else{var B=3*m[O+c+y[N+p+y[I+f]]];a=(z*=z)*z*(g[B]*k+g[B+1]*F+g[B+2]*A)}var q=.6-C*C-P*P-S*S;if(q<0)s=0;else{var U=3*m[O+l+y[N+h+y[I+d]]];s=(q*=q)*q*(g[U]*C+g[U+1]*P+g[U+2]*S)}var W=.6-R*R-j*j-D*D;if(W<0)u=0;else{var G=3*m[O+1+y[N+1+y[I+1]]];u=(W*=W)*W*(g[G]*R+g[G+1]*j+g[G+2]*D)}return 32*(r+a+s+u)},noise4D:function(t,e,n,r){var i,o,u,c,p,f,l,h,d,m,y,g,v,w,x,b,M,_=this.perm,T=this.grad4,E=(t+e+n+r)*a,k=Math.floor(t+E),F=Math.floor(e+E),A=Math.floor(n+E),C=Math.floor(r+E),P=(k+F+A+C)*s,S=t-(k-P),R=e-(F-P),j=n-(A-P),D=r-(C-P),O=0,N=0,I=0,L=0;S>R?O++:N++,S>j?O++:I++,S>D?O++:L++,R>j?N++:I++,R>D?N++:L++,j>D?I++:L++;var H=S-(f=O>=3?1:0)+s,z=R-(l=N>=3?1:0)+s,B=j-(h=I>=3?1:0)+s,q=D-(d=L>=3?1:0)+s,U=S-(m=O>=2?1:0)+2*s,W=R-(y=N>=2?1:0)+2*s,G=j-(g=I>=2?1:0)+2*s,Y=D-(v=L>=2?1:0)+2*s,K=S-(w=O>=1?1:0)+3*s,Q=R-(x=N>=1?1:0)+3*s,V=j-(b=I>=1?1:0)+3*s,Z=D-(M=L>=1?1:0)+3*s,J=S-1+4*s,$=R-1+4*s,X=j-1+4*s,tt=D-1+4*s,et=255&k,nt=255&F,rt=255&A,it=255&C,ot=.6-S*S-R*R-j*j-D*D;if(ot<0)i=0;else{var at=_[et+_[nt+_[rt+_[it]]]]%32*4;i=(ot*=ot)*ot*(T[at]*S+T[at+1]*R+T[at+2]*j+T[at+3]*D)}var st=.6-H*H-z*z-B*B-q*q;if(st<0)o=0;else{var ut=_[et+f+_[nt+l+_[rt+h+_[it+d]]]]%32*4;o=(st*=st)*st*(T[ut]*H+T[ut+1]*z+T[ut+2]*B+T[ut+3]*q)}var ct=.6-U*U-W*W-G*G-Y*Y;if(ct<0)u=0;else{var pt=_[et+m+_[nt+y+_[rt+g+_[it+v]]]]%32*4;u=(ct*=ct)*ct*(T[pt]*U+T[pt+1]*W+T[pt+2]*G+T[pt+3]*Y)}var ft=.6-K*K-Q*Q-V*V-Z*Z;if(ft<0)c=0;else{var lt=_[et+w+_[nt+x+_[rt+b+_[it+M]]]]%32*4;c=(ft*=ft)*ft*(T[lt]*K+T[lt+1]*Q+T[lt+2]*V+T[lt+3]*Z)}var ht=.6-J*J-$*$-X*X-tt*tt;if(ht<0)p=0;else{var dt=_[et+1+_[nt+1+_[rt+1+_[it+1]]]]%32*4;p=(ht*=ht)*ht*(T[dt]*J+T[dt+1]*$+T[dt+2]*X+T[dt+3]*tt)}return 27*(i+o+u+c+p)}},u._buildPermutationTable=c,"undefined"!=typeof define&&define.amd&&define(function(){return u}),void 0!==n?n.SimplexNoise=u:"undefined"!=typeof window&&(window.SimplexNoise=u),void 0!==e&&(e.exports=u)}()},{}],8:[function(t,e,n){"use strict";var r=a(t("canvas-sketch")),i=a(t("canvas-sketch-util/random")),o=t("../../utils/utils01");function a(t){return t&&t.__esModule?t:{default:t}}const s={dimensions:[window.innerWidth,window.innerHeight],resizeCanvas:!0,scaleToView:!0,animate:!0},u={lines:"#1E1E1E",agents:["#79B4B7","#BFA2DB","#DEBA9D","#87A8A4","#DE8971","#E6B566","#F2AAAA","#95D2B3","#CA8787","#93C6E7","#FAAB78","#9ADCFF","#D77FA1"],bg:"#FFFCF2",gridLines:"#C7BFA6",gridCells:"#e7e4d9ff"};(0,r.default)(({width:t,height:e,canvas:n})=>{let r=Array.from({length:60},()=>(0,o.createAgent)(i.default.range(0,t),i.default.range(0,e),u.agents.length)),a=null,s={x:0,y:0,px:0,py:0};const c=r=>{const i=n.getBoundingClientRect();return{x:(r.clientX-i.left)/i.width*t,y:(r.clientY-i.top)/i.height*e}};return n.addEventListener("pointermove",t=>{const e=c(t);s.px=s.x,s.py=s.y,s.x=e.x,s.y=e.y;let i=!1;for(const t of r){const e=s.x-t.pos.x,n=s.y-t.pos.y;if(e*e+n*n<=t.radius*t.radius){i=!0;break}}n.style.cursor=i?"pointer":"default",a&&(a.pos.x=s.x,a.pos.y=s.y,a.vel.x=0,a.vel.y=0)}),n.addEventListener("pointerdown",t=>{const e=c(t);s.x=e.x,s.y=e.y;for(const e of r){const r=s.x-e.pos.x,i=s.y-e.pos.y;if(r*r+i*i<=e.radius*e.radius){a=e,n.setPointerCapture?.(t.pointerId);break}}}),n.addEventListener("pointerup",t=>{a&&(a.vel.x=s.x-s.px,a.vel.y=s.y-s.py),a=null,n.releasePointerCapture?.(t.pointerId)}),(0,o.initTrailGrid)(t,e,30),(0,o.attachTrailMouse)(n,()=>({width:t,height:e})),({context:t,width:e,height:n})=>{t.fillStyle=u.bg,t.fillRect(0,0,e,n),(0,o.highlightGridCell)(t,r,30,u),(0,o.drawGrid)(t,e,n,30,u),(0,o.updateTrail)(.02),(0,o.drawMouseTrail)(t,30);for(let e=0;e<r.length;e++)for(let n=e+1;n<r.length;n++){if((0,o.drawConnection)(t,r[e],r[n],u),r[e]===a||r[n]===a)continue;let[i,s]=(0,o.resolveCollision)(r[e],r[n]);r[e]=i,r[n]=s}r=r.map(t=>t===a?t:(0,o.updateAgent)(t)).map(t=>t===a?t:(0,o.bounceAgent)(t,e,n)),r.forEach(e=>e===a?(0,o.drawAgent)(t,e,u,!0):(0,o.drawAgent)(t,e,u)),r.forEach((e,n)=>{const i=[];for(let t=0;t<r.length;t++){if(n===t)continue;const o=r[t],a=e.pos.x-o.pos.x,s=e.pos.y-o.pos.y;Math.sqrt(a*a+s*s)<200&&i.push(o)}if(i.length>=2){const n=(0,o.vectorBetween)(e.pos,i[0].pos),r=(0,o.vectorBetween)(e.pos,i[1].pos),a=(0,o.angleBetween)(n,r);(0,o.drawAngleArc)(t,e.pos,n,r,25,"#1e1e1e");const{x:s,y:u}=e.pos;t.fillStyle="#333",t.font="12px sans-serif",t.fillText(a.toFixed(1)+"Â°",s+10,u-10)}})}},s)},{"../../utils/utils01":9,"canvas-sketch":4,"canvas-sketch-util/random":3}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.vectorBetween=n.updateTrail=n.updateAgent=n.resolveCollision=n.initTrailGrid=n.highlightGridCell=n.drawMouseTrail=n.drawGrid=n.drawConnection=n.drawAngleArc=n.drawAgent=n.createAgent=n.bounceAgent=n.attachTrailMouse=n.angleBetween=void 0;var r=o(t("canvas-sketch-util/math")),i=o(t("canvas-sketch-util/random"));function o(t){return t&&t.__esModule?t:{default:t}}let a=0,s=0,u=null,c=null,p={x:-1,y:-1,inside:!1};const f=[[190,220],[260,280],[320,350],[100,140]];n.drawGrid=(t,e,n,r=50,i)=>{t.strokeStyle=i.gridLines,t.lineWidth=.3;for(let i=0;i<=e;i+=r)t.beginPath(),t.moveTo(i,0),t.lineTo(i,n),t.stroke();for(let i=0;i<=n;i+=r)t.beginPath(),t.moveTo(0,i),t.lineTo(e,i),t.stroke()};n.initTrailGrid=(t,e,n=30)=>{a=Math.ceil(t/n),s=Math.ceil(e/n),u=new Float32Array(a*s),c=new Array(a*s).fill(null)};const l=(t,e)=>e*a+t,h=(t,e,n=30)=>{const r=Math.floor(t/n),i=Math.floor(e/n);if(r>=0&&i>=0&&r<a&&i<s){const t=l(r,i);u[t]=1,c[t]||(c[t]=(()=>{const[t,e]=f[Math.floor(Math.random()*f.length)];return`hsl(${t+Math.random()*(e-t)}, ${35+10*Math.random()}%, ${75+10*Math.random()}%)`})())}};n.updateTrail=(t=.02)=>{for(let e=0;e<u.length;e++){const n=u[e]-t;u[e]=n>0?n:0}};n.drawMouseTrail=(t,e=30)=>{for(let n=0;n<a;n++)for(let r=0;r<s;r++){const i=l(n,r),o=u[i];if(o<=0)continue;t.fillStyle=c[i].replace("hsl","hsla").replace(")",`, ${o})`),t.fillRect(n*e,r*e,e,e)}};n.attachTrailMouse=(t,e)=>{const n=n=>{const r=t.getBoundingClientRect(),{width:i,height:o}=e(),a=(n.clientX-r.left)/r.width*i,s=(n.clientY-r.top)/r.height*o;p.x=a,p.y=s,p.inside=!0,h(a,s)},r=()=>{p.inside=!1};return t.addEventListener("mousemove",n),t.addEventListener("mouseleave",r),()=>{t.removeEventListener("mousemove",n),t.removeEventListener("mouseleave",r)}};n.highlightGridCell=(t,e,n,r)=>{t.fillStyle=r.gridCells,e.forEach(e=>{const r=Math.floor(e.pos.x/n),i=Math.floor(e.pos.y/n);t.fillRect(r*n,i*n,n,n)})};const d=(t,e)=>({x:t,y:e});n.createAgent=(t,e,n)=>({pos:d(t,e),vel:d(i.default.range(-2,2),i.default.range(-2,2)),radius:i.default.range(4,8),mass:1,colorIndex:Math.round(i.default.range(0,n))});const m=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),y=(t,e)=>t.x*e.x+t.y*e.y;n.updateAgent=t=>({...t,pos:{x:t.pos.x+t.vel.x,y:t.pos.y+t.vel.y}});n.bounceAgent=(t,e,n)=>{let{vel:r,pos:i}=t,o={...r};return(i.x-t.radius<=0||i.x+t.radius>=e)&&(o.x*=-1),(i.y-t.radius<=0||i.y+t.radius>=n)&&(o.y*=-1),{...t,vel:o}};n.resolveCollision=(t,e)=>{const n=m(t.pos,e.pos),r=t.radius+e.radius;if(n<r){const i=(t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}})({x:e.pos.x-t.pos.x,y:e.pos.y-t.pos.y}),o={x:-i.y,y:i.x},a=y(t.vel,i),s=y(t.vel,o),u=y(e.vel,i),c=y(e.vel,o),p={x:u*i.x,y:u*i.y},f={x:s*o.x,y:s*o.y},l={x:a*i.x,y:a*i.y},h={x:c*o.x,y:c*o.y},d={x:p.x+f.x,y:p.y+f.y},m={x:l.x+h.x,y:l.y+h.y},g=(r-n)/2,v={x:i.x*g,y:i.y*g},w={x:t.pos.x-v.x,y:t.pos.y-v.y},x={x:e.pos.x+v.x,y:e.pos.y+v.y};return[{...t,vel:d,pos:w},{...e,vel:m,pos:x}]}return[t,e]};n.vectorBetween=(t,e)=>({x:e.x-t.x,y:e.y-t.y});const g=t=>Math.sqrt(t.x*t.x+t.y*t.y);n.angleBetween=(t,e)=>{const n=g(t),r=g(e);if(0===n||0===r)return 0;const i=y(t,e)/(n*r),o=Math.min(1,Math.max(-1,i));return 180*Math.acos(o)/Math.PI};n.drawAngleArc=(t,e,n,r,i=30,o="red")=>{const a=Math.atan2(n.y,n.x);let s=Math.atan2(r.y,r.x)-a;s<-Math.PI&&(s+=2*Math.PI),s>Math.PI&&(s-=2*Math.PI),t.save(),t.strokeStyle=o,t.lineWidth=2,t.beginPath(),t.arc(e.x,e.y,i,a,a+s,s<0),t.stroke(),t.restore()};n.drawAgent=(t,e,n,r=!1)=>{t.fillStyle=n.agents[e.colorIndex],t.strokeStyle=n.lines,t.lineWidth=2;let i=e.radius;r?(t.shadowColor="rgba(0, 0, 0, 0.8)",t.shadowBlur=10,i*=1.35):(t.shadowColor="transparent",t.shadowBlur=0),t.beginPath(),t.arc(e.pos.x,e.pos.y,i,0,2*Math.PI),t.fill(),t.stroke()};n.drawConnection=(t,e,n,i)=>{const o=m(e.pos,n.pos);o>200||(t.lineWidth=r.default.mapRange(o,0,200,5,1),t.strokeStyle=i.lines,t.beginPath(),t.moveTo(e.pos.x,e.pos.y),t.lineTo(n.pos.x,n.pos.y),t.stroke())}},{"canvas-sketch-util/math":2,"canvas-sketch-util/random":3}],10:[function(t,e,n){(function(t){(function(){t.CANVAS_SKETCH_DEFAULT_STORAGE_KEY=window.location.href}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[8,10]);
//# sourceMappingURL=sketch01Funcional.js.map
